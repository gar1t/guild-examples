- config: model-base
  operation-defaults:
    compare:
      - .data_type as type
      - =prepared-data
      - acc
      - last acc step as step
  resources:
    prepared-data:
      - operation: prepare-data

- operations:
    prepare-data:
      main: prepare_data
      flags-import: all
      flags:
        type:
          choices: [cats, dogs]

    pipeline:
      steps:
        - prepare-data
        - random-forest:train
        - decision-tree:train

- model: random-forest
  extends: model-base
  operations:
    train:
      main: random_forest
      requires: prepared-data

- model: decision-tree
  extends: model-base
  operations:
    train:
      main: decision_tree
      requires: prepared-data
